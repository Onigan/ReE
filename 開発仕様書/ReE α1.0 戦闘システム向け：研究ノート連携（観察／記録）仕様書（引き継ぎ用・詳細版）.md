# ReE α1.0 戦闘システム向け：研究ノート連携（観察／記録）仕様書（引き継ぎ用・詳細版）
最終更新：2026-01-11  
作成：ノア  

---

> ✅ 追記（2026-01-11）：**画面文言の確定案（ボタン名・Confirm表示文・ログ文）**を追加  
> 本追記は「実装時に迷いが出ない」ことを目的に、**固定文言（文字列）**として定義します。  
> 仕様本体（UI導線・Token・Intent）は前版のまま有効です。

---

# 付録A：画面文言（Strings）確定案 v1.0
確度：［確定］  
対象：戦闘UI（Root/特殊行動/状況行動/TargetSelect/Confirm/Log）

---

## A-1. メニュー階層の表示名（ボタン文言）
### Root（既存）
- Rootの5枠は既存のまま（本仕様では文言を固定しない）

### 追加導線（固定）
- Root 内ボタン：既存 **「特殊行動」**（※既存名称を尊重）
- 特殊行動メニュー内：**「状況行動」**
- 状況行動リスト内：**「観察／記録」**

> 注：表記揺れを避けるため、スラッシュは全角「／」を採用。

---

## A-2. 状況行動リスト（並び・説明）
### 状況行動リスト項目（α1.0最小）
1. **観察／記録**  
   - サブ説明（小文字/ツールチップ用）：  
     - **「対象の情報を記録する（時間コストあり）」**

> 追加の状況行動（挑発/罠/儀式など）はα1.1以降。ここでは未定義。

---

## A-3. TargetSelect 画面（タブ名・補助文言）
### タブ/トグル表示（固定）
- **敵**
- **味方**
- **自分**

### 画面ヘッダ（固定）
- **「観察／記録：対象を選択」**

### リストの未同定表記（固定）
- 対象名が未同定の場合：**`---`**  
  - 例：`---（小鬼のような影）` のような補助表記は **α1.1以降（未定）**  
  - α1.0は `---` 単体でOK

---

## A-4. Confirm 画面（表示項目・文言テンプレ）
### Confirmヘッダ（固定）
- **「行動確認」**

### 表示項目（固定・テンプレ）
- 行動：**「観察／記録」**
- 対象：`{TargetName}`（未同定は `---`）
- 所要時間：`{ObserveTime}`  
  - 例：`所要時間：1.2`（単位は既存TimeCore表記に従う）
- 効果：固定文  
  - **「観測記録を獲得（街／探索で研究ノートに整理）」**

### Confirmボタン（固定）
- 決定：**「実行」**
- 戻る：既存ルール（Esc短押し＝戻る）に従うため、ボタンは任意  
  - UIに出す場合は **「戻る」**

---

## A-5. 戦闘ログ文（ログ主導進行：短く・タグ付き）
### 観察開始ログ（任意：α1.0は省略可）
- ［推定］ログを出すなら：  
  - **「【観察】{ActorName}は{TargetName}を観察しはじめた。」**

### 観察成功ログ（固定：α1.0はこれだけでOK）
- ［確定］  
  - **「【観察】{ActorName}は{TargetName}を注意深く観察した。」**

### Token獲得ログ（任意：デバッグ用、通常は非表示推奨）
- ［未定］  
  - 「（観測記録を獲得）」※ゲーム体験としては上の成功ログだけで十分

### 観察失敗ログ（α1.1以降：予約）
- ［未定］例文（将来用）：
  - **「【観察】{ActorName}は{TargetName}を見失った。」**
  - **「【観察】妨害により十分な記録が取れなかった。」**

---

## A-6. エラーメッセージ／ガード文言（最小）
> α1.0では極力出さない（テンポ優先）。ただし実装上必要な場合の固定文言。

- 対象が存在しない（稀）：  
  - **「対象が見つからない。」**
- 選択不可（例：行動不能状態など、将来用）：  
  - **「今は実行できない。」**

---

## A-7. 観察／記録の“世界観説明”短文（UI説明欄用）
- ［確定］  
  - **「観察で得た記録は、街や探索中に研究ノートへまとめられる。」**

---

# 付録B：実装メモ（文字列IDの推奨命名）
確度：［推定］（命名は開発側の規約優先）

- `UI_Action_Special` = "特殊行動"
- `UI_Action_Situation` = "状況行動"
- `UI_Action_Observe` = "観察／記録"
- `UI_Observe_TargetSelect_Title` = "観察／記録：対象を選択"
- `UI_Confirm_Title` = "行動確認"
- `UI_Confirm_Execute` = "実行"
- `UI_Observe_EffectText` = "観測記録を獲得（街／探索で研究ノートに整理）"
- `LOG_Observe_Success` = "【観察】{0}は{1}を注意深く観察した。"

---

# 付録C：今回の仕様の最終まとめ（開発チャット向け超短縮）
- UI導線は **Root→特殊行動→状況行動→観察／記録**（Root5枠は不変更）
- 観察／記録は TargetSelect（敵/味方/自分）→ Confirm → Commit
- Commitで Observe Intent をTimeCoreに積む（時間コストあり）
- Resolveで ObservationToken を生成（答え/分類は生成しない、ログ参照と事実のみ）
- ノート本文は **街/探索**でTokenから作る（戦闘後に強制しない）
- ログ文は固定：**「【観察】{Actor}は{Target}を注意深く観察した。」**

---
